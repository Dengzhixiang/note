# TCP/IP

TCP/IP协议族按层次分为：

* 应用层
* 传输层：对上层提供处于网络连接中的两台计算机之间的数据传输（TCP，UDP）
* 网络层：IP
* 数据链路层

在传输层把从应用层处收到的数据进行分割，并在各个报文上打上标记序号及端口号后转发给网络层。在网络层增加作为通信目的地的MAC地址后转发给链路层。

和HTTP相关协议：IP，ARP（IP和MAC地址的映射），TCP，DNS（域名解析）

# HTTP

HTTP是一种无状态协议，每当有新的请求发送是就会有对应的新的响应产生，为了解决这个问题引入了cookie。

http请求方法：

| 方法    | 说明                   |
| ------- | ---------------------- |
| GET     | 获取资源               |
| POST    | 传输实体主体           |
| PUT     | 传输文件               |
| HEAD    | 获取报文首部           |
| DELETE  | 删除文件               |
| OPTIONS | 询问支持的方法         |
| TRACE   | 追踪路径               |
| CONNECT | 要求用隧道协议连接代理 |
| LINK    | 建立和资源之间的联系   |
| UNLINK  | 断开连接关系           |

http持久化连接使得管线化请求发送成为可能，不用等待响应也能直接发送下一个请求。

Cookie会根据从服务器端发送的响应报文内的一个叫做Set-Cookie的首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入Cookie值后发送出去。服务器端发现客户端发送过来的Cookie后，会去检查究竟是从哪一个客户端发来的连接请求，然后对比服务器上的记录，最后得到之前的状态信息。

HTTP传输效率提高方法：

* 实体内容压缩
* 分块传输编码

多部分对象集合：multipart/formdata；发送的一份报文主体内可含有多类型实体。

```cmd
//boudary指明多实体之间的分隔符
Content-Type:multipart/formdata;boundary=AaB03x
```

范围请求：通过首部字段Range指定请求资源的字节范围。针对范围请求响应会返回状态码206，如果服务器无法响应范围请求则会返回状态码200和完整的实体内容。

# HTTP状态码

状态码分类：

| 状态码类别 | 说明                       | 状态码                                                       |
| ---------- | -------------------------- | ------------------------------------------------------------ |
| 1XX        | 接受的请求正在处理         |                                                              |
| 2XX        | 请求正常处理完毕           | 200 正常处理成功<br />204 成功处理但是没有返回实体<br />206 范围请求 |
| 3XX        | 需要进行附加操作以完成请求 | 301 永久性重定向<br />302 临时性重定向<br />303 通过GET方法重定向<br />304 资源不满足请求条件<br />307 临时重定向 |
| 4XX        | 服务器无法处理请求         | 400 请求报文存在语法错误<br />401 需要认证<br />403 拒绝访问<br />404 找不到请求资源 |
| 5XX        | 服务器处理请求出错         | 500 服务器执行请求发生错误<br />503 服务器无法处理请求       |

